import{Row as e,Col as r,Form as n,InputGroup as t,InputGroupText as i,Input as o,Button as a,Spinner as l}from"ims-ui-kit";import s from"prop-types";import c,{useState as u,useEffect as m}from"react";import{BiEnvelope as f,BiLock as h,BiLogInCircle as d}from"react-icons/bi";import*as v from"yup";import{jsx as g,jsxs as p}from"react/jsx-runtime";function b(){return b=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},b.apply(this,arguments)}function y(e,r){try{var n=e()}catch(e){return r(e)}return n&&n.then?n.then(void 0,r):n}Object.byString=function(e,r){for(var n=(r=(r=r.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),t=0,i=n.length;t<i;++t){var o=n[t];if(!(o in e))return;e=e[o]}return e};var P=function(e,r){var n=u(e),t=n[0],i=n[1],o=u({}),a=o[0],l=o[1],s=u(!1),c=s[0],f=s[1],h=function(){try{var e={abortEarly:!1},n={};return Promise.resolve(y(function(){return Promise.resolve(r.validate(t,e)).then(function(){return null})},function(e){return e.inner.forEach(function(e){n[e.path]=e.message}),n}))}catch(e){return Promise.reject(e)}},d=function(){i(e),l({})},g=function e(r,n){var t,i=Object.keys(r),o=Object.keys(n);if(i.length!==o.length)return!1;for(var a=0,l=i;a<l.length;a++){var s=l[a],c=r[s],u=n[s],m=null!==(t=c)&&"object"==typeof t;if(!m&&c!==u)return!1;if(m&&!e(c,u))return!1}return!0};return m(function(){console.log("datamodel",t),console.log("validation error:",a)},[t,a]),m(function(){Promise.resolve(h()).then(function(e){if(e)return l(e)})},[]),{dataModel:t,validationErrors:a,isBusy:c,handleChange:function(e){var n=e.field,o=e.value,s=b({},t);s[n]=o,i(s),function(e,n){try{var t=b({},a),i=function(i,o){try{var a=y(function(){var i=v.reach(r,e);return Promise.resolve(i.validate(n)).then(function(){delete t[e]})},function(r){t[e]=r.message})}catch(e){return o(!0,e)}return a&&a.then?a.then(o.bind(null,!1),o.bind(null,!0)):o(!1,a)}(0,function(e,r){if(l(t),e)throw r;return r});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}(n,o)},handleSubmit:function(e,r,n,i){void 0===n&&(n=!0);try{return e.preventDefault(),Promise.resolve(h()).then(function(i){function o(){f(!1)}if(i)return l(i);var a=y(function(){return f(!0),Promise.resolve(new Promise(function(i,o){try{return Promise.resolve(y(function(){return Promise.resolve(r(t,e)).then(function(){return n&&d(),i()})},function(e){return o(e)}))}catch(e){return Promise.reject(e)}})).then(function(){})},function(e){console.log(e)});return a&&a.then?a.then(o):o()})}catch(e){return Promise.reject(e)}},isFormValid:function(){return 0===Object.keys(a).length},resetForm:d,hasUnsavedData:function(){return!g(e,t)}}},w={email:"",password:""},j=v.object({email:v.string().required().email().label("Email"),password:v.string().required().min(8).label("Password")});v.object({name:v.string().required().label("Name"),email:v.string().required().email().label("Email"),password:v.string().required().min(8).label("Password")}),v.object({email:v.string().required().email().label("Email")}),v.object({password:v.string().required().min(8).label("Password")});var C=function(e){var r=e.onLogin,s=void 0===r?function(){}:r,u=e.onPasswordChange,m=void 0===u?function(){}:u,v=e.onEmailChange,b=void 0===v?function(){}:v,y=P(w,j),C=y.dataModel,E=y.handleChange,N=y.isBusy,k=y.handleSubmit,O=y.isFormValid;/*#__PURE__*/return p("div",{className:"login-form",children:[/*#__PURE__*/g("img",{className:"login-alice-logo mb-4",src:"https://assets.imssystems.tech/images/logo/alice/alice-full-logo.svg"}),/*#__PURE__*/g("h4",{className:"",children:"Welcome!"}),/*#__PURE__*/g("p",{className:"mb-5",children:"Boost your business efficiency with AI technology."}),/*#__PURE__*/p(n,{children:[/*#__PURE__*/p(t,{children:[/*#__PURE__*/g(i,{children:/*#__PURE__*/g(f,{})}),/*#__PURE__*/g(o,{label:"Email",placeholder:"Email",type:"email",autoComplete:"off",value:C.email,onChange:function(e){var r={field:"email",value:e.currentTarget.value};E(r),b(r)}})]}),/*#__PURE__*/p(t,{children:[/*#__PURE__*/g(i,{children:/*#__PURE__*/g(h,{})}),/*#__PURE__*/g(o,{label:"Password",placeholder:"Password",type:"password",autoComplete:"off",value:C.password,onChange:function(e){var r={field:"password",value:e.currentTarget.value};E(r),m(r)}})]}),/*#__PURE__*/g("a",{className:"btn-link",href:"https://alice.imssystems.tech/accounts/recovery",children:/*#__PURE__*/g("small",{children:"Forgot password?"})}),/*#__PURE__*/g(a,{className:"mt-5 mb-2",color:"primary",type:"submit",onClick:function(e){return k(e,s)},disabled:!O()||N,block:!0,children:/*#__PURE__*/p(c.Fragment,N?{children:["Signing in ",/*#__PURE__*/g(l,{size:"sm"})]}:{children:["Sign in ",/*#__PURE__*/g(d,{})]})})]}),/*#__PURE__*/g("small",{children:"Don't have an account? Let's "}),/*#__PURE__*/p("a",{className:"btn-link",href:"https://alice.imssystems.tech/accounts/register",children:[/*#__PURE__*/g("small",{children:"Get Started"}),"."]})]})},E=function(n){/*#__PURE__*/return g(e,{className:"h-100",children:/*#__PURE__*/g(r,{md:"5",className:"mx-auto",children:/*#__PURE__*/g(C,b({},n))})})};E.propTypes={onLogin:s.func,onPasswordChange:s.func,onEmailChange:s.func};export{E as AliceAuthPage};
//# sourceMappingURL=index.modern.js.map
