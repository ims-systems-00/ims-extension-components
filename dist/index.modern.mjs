import{Row as e,Col as a,Form as r,InputGroup as t,InputGroupText as l,Input as n,Button as s,Spinner as i}from"ims-ui-kit";import o from"prop-types";import c,{useState as m,useEffect as d}from"react";import{BiEnvelope as h,BiLock as u,BiLogInCircle as g}from"react-icons/bi";import*as p from"yup";import{jsx as f,jsxs as b}from"react/jsx-runtime";function y(){return y=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},y.apply(this,arguments)}Object.byString=function(e,a){let r=(a=(a=a.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let a=0,t=r.length;a<t;++a){let t=r[a];if(!(t in e))return;e=e[t]}return e};let w={email:"",password:""},v=p.object({email:p.string().required().email().label("Email"),password:p.string().required().min(8).label("Password")});p.object({name:p.string().required().label("Name"),email:p.string().required().email().label("Email"),password:p.string().required().min(8).label("Password")}),p.object({email:p.string().required().email().label("Email")}),p.object({password:p.string().required().min(8).label("Password")});const j=({onLogin:e=(()=>{}),onPasswordChange:a=(()=>{}),onEmailChange:o=(()=>{})})=>{let{dataModel:j,handleChange:C,isBusy:E,handleSubmit:N,isFormValid:P}=((e,a)=>{const[r,t]=m(e),[l,n]=m({}),[s,i]=m(!1),o=async()=>{const e={abortEarly:!1},t={};try{return await a.validate(r,e),null}catch(e){return e.inner.forEach(e=>{t[e.path]=e.message}),t}},c=()=>{t(e),n({})},h=(e,a)=>{const r=Object.keys(e),t=Object.keys(a);if(r.length!==t.length)return!1;for(const t of r){const r=e[t],n=a[t],s=null!==(l=r)&&"object"==typeof l;if(!s&&r!==n)return!1;if(s&&!h(r,n))return!1}var l;return!0};return d(()=>{console.log("datamodel",r),console.log("validation error:",l)},[r,l]),d(()=>{!async function(){const e=await o();e&&n(e)}()},[]),{dataModel:r,validationErrors:l,isBusy:s,handleChange:({field:e,value:s})=>{const i=y({},r);i[e]=s,t(i),(async(e,r)=>{const t=y({},l);try{const l=p.reach(a,e);await l.validate(r),delete t[e]}catch(a){t[e]=a.message}finally{n(t)}})(e,s)},handleSubmit:async(e,a,t=!0,l={})=>{e.preventDefault();const s=await o();if(s)return n(s);try{i(!0),await new Promise(async(l,n)=>{try{return await a(r,e),t&&c(),l()}catch(e){return n(e)}})}catch(e){console.log(e)}i(!1)},isFormValid:()=>0===Object.keys(l).length,resetForm:c,hasUnsavedData:()=>!h(e,r)}})(w,v);/*#__PURE__*/return b("div",{className:"login-form",children:[/*#__PURE__*/f("img",{className:"login-alice-logo mb-4",src:"https://assets.imssystems.tech/images/logo/alice/alice-full-logo.svg"}),/*#__PURE__*/f("h4",{className:"",children:"Welcome!"}),/*#__PURE__*/f("p",{className:"mb-5",children:"Boost your business efficiency with AI technology."}),/*#__PURE__*/b(r,{children:[/*#__PURE__*/b(t,{children:[/*#__PURE__*/f(l,{children:/*#__PURE__*/f(h,{})}),/*#__PURE__*/f(n,{label:"Email",placeholder:"Email",type:"email",autoComplete:"off",value:j.email,onChange:e=>{const a={field:"email",value:e.currentTarget.value};C(a),o(a)}})]}),/*#__PURE__*/b(t,{children:[/*#__PURE__*/f(l,{children:/*#__PURE__*/f(u,{})}),/*#__PURE__*/f(n,{label:"Password",placeholder:"Password",type:"password",autoComplete:"off",value:j.password,onChange:e=>{const r={field:"password",value:e.currentTarget.value};C(r),a(r)}})]}),/*#__PURE__*/f("a",{className:"btn-link",href:"https://alice.imssystems.tech/accounts/recovery",children:/*#__PURE__*/f("small",{children:"Forgot password?"})}),/*#__PURE__*/f(s,{className:"mt-5 mb-2",color:"primary",type:"submit",onClick:a=>N(a,e),disabled:!P()||E,block:!0,children:/*#__PURE__*/b(c.Fragment,E?{children:["Signing in ",/*#__PURE__*/f(i,{size:"sm"})]}:{children:["Sign in ",/*#__PURE__*/f(g,{})]})})]}),/*#__PURE__*/f("small",{children:"Don't have an account? Let's "}),/*#__PURE__*/b("a",{className:"btn-link",href:"https://alice.imssystems.tech/accounts/register",children:[/*#__PURE__*/f("small",{children:"Get Started"}),"."]})]})},C=r=>/*#__PURE__*/f(e,{className:"h-100",children:/*#__PURE__*/f(a,{md:"5",className:"mx-auto",children:/*#__PURE__*/f(j,y({},r))})});C.propTypes={onLogin:o.func,onPasswordChange:o.func,onEmailChange:o.func};export{C as AliceAuthPage};
//# sourceMappingURL=index.modern.mjs.map
